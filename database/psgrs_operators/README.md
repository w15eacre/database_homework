# Обработка данных в PostgreSQL

## Обзор
Эта задача включает работу с двумя CSV-файлами, содержащими данные о клиентах и транзакциях. Цель - научиться работать с основными операторами PostgreSQL, фильтровать таблицы по разным условиям, писать вложенные запросы, объединять таблицы..

## Датасет
Данные лежат в директории **data**. 
- **customer.csv**: Содержит информацию о клиентах.
- **transaction.csv**: Содержит детали транзакций клиентов.

## Этапы выполнения
### 1. Создание таблиц и загрузка данных
Создайте необходимые таблицы в PostgreSQL и загрузите данные из CSV-файлов.

### 2. Выполните следующие запросы
#### Базовые запросы
1. (1 балл) Вывести все уникальные бренды, у которых стандартная стоимость выше 1500 долларов.
2. (1 балл) Вывести все подтвержденные транзакции за период '2017-04-01' по '2017-04-09' включительно.
3. (1 балл) Вывести все профессии у клиентов из сферы IT или Financial Services, которые начинаются с фразы 'Senior'..
4. (1 балл) Вывести все бренды, которые закупают клиенты, работающие в сфере Financial Services
5. (1 балл) Вывести 10 клиентов, которые оформили онлайн-заказ продукции из брендов 'Giant Bicycles', 'Norco Bicycles', 'Trek Bicycles'.
6. (1 балл) Вывести всех клиентов, у которых нет транзакций.

#### Продвинутые запросы (2 балла каждый)
7. (2 балла) Вывести всех клиентов из IT, у которых транзакции с максимальной стандартной стоимостью.
8. (2 балла) Вывести всех клиентов из сферы IT и Health, у которых есть подтвержденные транзакции за период '2017-07-07' по '2017-07-17'.

## Требования
- База данных PostgreSQL
- CSV-файлы: `customer.csv` и `transaction.csv`
- Базовые знания SQL-запросов

## Подготовка к запуску ноутбука
1. Импортируейте данные из папки data в вашу базу(обратите внимание на разделитель - **;**).
2. Установить зависимости из **requirements.txt**
3. Задать пароль для вашей базы данных. В ноутбуке используется dbus для получения пароля из хранилища по ключу **ipynb**, если у вас не установлен dbus или нет хранилища, вставьте пароль в ячейку подключения к базе. 
4. Запустить все ячейки.

## Данные таблиц

### Ожидаемые колонки
![Customer](resources/customer_columns.png) ![Transaction](resources/transaction_columns.png)

### Структура таблицы `customer`

| Поле                     | Описание                              |
|--------------------------|---------------------------------------|
| `customer_id`            | ID клиента                           |
| `first_name`             | Имя клиента                          |
| `last_name`              | Фамилия клиента                      |
| `gender`                 | Пол                                  |
| `DOB`                    | Дата рождения                        |
| `job_title`              | Профессия                            |
| `job_industry_category`  | Сфера деятельности                   |
| `wealth_segment`         | Сегмент благосостояния               |
| `deceased_indicator`     | Флаг актуального клиента             |
| `owns_car`               | Флаг наличия автомобиля              |
| `address`                | Адрес проживания                     |
| `postcode`               | Почтовый индекс                      |
| `state`                  | Штат                                 |
| `country`                | Страна проживания                    |
| `property_valuation`     | Оценка имущества                     |

### Структура таблицы `transaction`

| Поле                     | Описание                              |
|--------------------------|---------------------------------------|
| `transaction_id`         | ID транзакции                         |
| `product_id`            | ID продукта                           |
| `customer_id`           | ID клиента                            |
| `transaction_date`      | Дата транзакции                       |
| `online_order`          | Флаг онлайн-заказа                    |
| `order_status`          | Статус транзакции                     |
| `brand`                 | Бренд                                 |
| `product_line`          | Линейка продуктов                     |
| `product_class`         | Класс продукта                        |
| `product_size`          | Размер продукта                       |
| `list_price`            | Цена                                  |
| `standard_cost`         | Стандартная стоимость                 |
